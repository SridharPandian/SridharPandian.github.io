<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Igloos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css" href="Webpage.css">

</head>
<body>

    <div class="container">

        <!-- For header -->
        <h1>Igloos</h1>
        
        <br>

        <!-- For image -->
        <div class="image">
            <img class="img-responsive" src="Igloo.jpg" style="text-align:center;">
        </div>

        <br><br>

    <!-- For text -->
        <div class="text">
            <div class="container" id="content">
                <p>
                Innuits live in houses called igloos . An igloo is made of large square pieces of ice . But the igloo itself isnâ€™t square-it looks like half of a big white ball standing on a white field of ice .
                It has a low opening for a door . It even has a window which is just a hole covered with a thin sheet of ice which lets the light in . An Innuit can build an igloo for his family in an hour .
                Inside this house , an Innuit sleeps on a bed made of hard snow . He uses skins of animals for sheets and covers . There is always a lamp burning inside the house which gives light and is used for cooking . The lamp is made of soapstone . It is filled with blubber , an oily material got from whales , which burns easily . Over the lamp is placed a cooking pot , also made of soapstone .
                Men , women and children wear clothing made of fur . When it is very cold , they wear two layers of fur clothing , one on top of the other . The first layer has the hair turned inwards and the second layer has the hair turned outwards . When it is warm , one layer of sealskin is enough .
                </p>
            </div>    
        </div>

    </div>


    <!-- jQuery scripts -->
    <script>
        $(document).ready(function(){

            // To split all the text in the paragraph to individual spans
            var words = $("p").text().split(' ');         
            var text = words.join("</span> <span>");
            $("p:first").html("<span>" + text + "</span>");

            // For highlighting a text onclick
            $("span").click(function () {
                $(this).addClass('highlighted');
                setTimeout(function () {
                    $('span').removeClass('highlighted');
                }, 1000);  
            });
            
            // dictionary connection with 1 second delay
            var longpress = 1000;
            var start;            
            jQuery("span").on('mousedown',function(e){
                start = new Date().getTime();
            } );

            jQuery("span").on('mouseleave',function(e){
                start = 0;
            } );
            jQuery("span").on('mouseup',function(e){
                if ( new Date().getTime() >= ( start + longpress )  ) {
                    $(this).toString().toLowerCase();
                    $.ajax({
                        url: "http://api.wordnik.com:80/v4/word.json/" + $(this).text() + "/definitions?limit=200&includeRelated=false&useCanonical=false&includeTags=false&api_key=a2a73e7b926c924fad7001ca3111acd55af2ffabf50eb4ae5",
                        type: "GET",
                        
                        success: function (data) {
                            alert(data[0].word + " : " + data[0].text);
                        },
                        error: function(data){
                            alert("Can't do find definition for this word!")
                        }
                    })
                }
            });

            // For mobile touch response    
            var star, xPos, yPos;
            var longpres = 600;
            var cli = 200;
            $("span").disableSelection();
            $("span").on('touchmove', function(e) {
            }).on('touchend', function (e) {
                var fxPos = e.changedTouches[0].pageX;
                var fyPos = e.changedTouches[0].pageY;
                if((fxPos-xPos)<1 && (fyPos-yPos)<1){
                    if ( new Date().getTime() >= ( star + longpres )  ) {
                        $('span').toString().toLowerCase();
                        $.ajax({
                            url: "http://api.wordnik.com:80/v4/word.json/" + $(this).text() + "/definitions?limit=200&includeRelated=false&useCanonical=false&includeTags=false&api_key=a2a73e7b926c924fad7001ca3111acd55af2ffabf50eb4ae5",
                            type: "GET",
                        
                            success: function (data) {
                                alert(data[0].word + " : " + data[0].text);
                            },
                            error: function(data){
                                alert("Can't do find definition for this word!")
                            }
                        })
                        star = 0;
                    } else if(new Date().getTime() <= ( star + cli )){
                        $(this).addClass('highlighted');
                        setTimeout(function () {
                            $('span').removeClass('highlighted');
                        }, 1000);
                    }
                }
            }).on('touchstart', function (e) {
                star = new Date().getTime();
                xPos = e.originalEvent.touches[0].pageX;
                yPos = e.originalEvent.touches[0].pageY;
            })
        });
    </script>
</body>
</html>